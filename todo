I've been busy this week. :-)  The appended patch deals only with "bugs,"
where I use the term rather loosely.  In particular:

 - minor spelling and grammar corrections
 - converted some tabs to spaces
 - changed scaleval from float to ulong (PPM_DEPTH macro is already corrected
    for integer round-off, and floats are generally expensive)
 - modified command-line hex conversion to use highest-precision maxval,
    then scale later (avoid round-off errors in ppm_parsecolor())
 - noted gcc 2.7.x optimization bug (argh...)
 - extended/added verbose messages; added missing "if (verbose)" to one
 - changed a few 256's to MAXCOLORS (probably not all, though)
 - got rid of section forcing background color to be opaque entry (see spec)
 - made palette+alpha background-handling consistent with non-alpha version
    (i.e., only add new backcolor if room in PLTE+tRNS combo, else look up
    closest match as with non-alpha version)

All of this is relative to 2.34, btw.  What I'll be doing tonight/tomorrow
(I hope) is:

DONE - update alphas_first_index[] array for background (forgot)
DONE - Linux makefile comments/fixes
DONE - move pnm_type to top (avoid several more uses of the same macros)
DONE - optimize tRNS chunk (sort RGBAs, opaque last)

 - free alpha_colors allocations (need to track how many allocated!)
 - suggestion to use new alloc/destroy functions

 - update pngcheck -p to include alpha info, too
 - figure out why pamquant likes max-1 as transparency values?

And finally, I'll send you what was supposed to be the main patch, namely:

 - add "portable alphamap" (pam) support
 - print version as part of default usage message
